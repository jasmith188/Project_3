(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{42:function(e,t,a){e.exports=a(80)},47:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(38),r=a.n(o),l=(a(47),a(23)),i=a(11),s=a(6),u={isAuthenticated:!1,authenticate(e){var t=this;fetch("api/users/user",{credentials:"include"}).then((function(a){if(console.log("response to authenticate ".concat(a)),200!==a.status)return!1;t.isAuthenticated=!0,"function"===typeof e&&(console.log("User in Auth.js ".concat(a.user)),e(a.json().user))})).catch((function(e){console.log("Error fetching authorized user.")}))},signout(e){var t=this;fetch("api/users/logout",{method:"POST",credentials:"include"}).then((function(a){t.isAuthenticated=!1,"function"===typeof e&&e(!0)})).catch((function(t){console.log("Error logging out user."),"function"===typeof e&&e(!1)}))}},m=a(7);var d=function(e){var t=e.icon,a=e.title,n=e.children;return c.a.createElement("div",{className:"card mt-4"},c.a.createElement("div",{className:"card-header"},c.a.createElement("h3",{className:"welcome"},c.a.createElement("strong",{className:"welcome"},c.a.createElement("i",{className:"fa fa-".concat(t),"aria-hidden":"true"})," ",a))),c.a.createElement("div",{className:"card-body"},n))};var p=function(e){var t=e.onLogin,a=Object(n.useRef)(),o=Object(n.useRef)(),r=Object(n.useRef)();return c.a.createElement(d,{title:"Login with your Username and Password"},c.a.createElement("form",{ref:a,onSubmit:function(e){return e.preventDefault(),t({username:o.current.value,password:r.current.value})}},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",ref:o,type:"text",name:"username",placeholder:"Enter Username"}),c.a.createElement("br",null),c.a.createElement("input",{className:"form-control",ref:r,type:"password",name:"password",placeholder:"Password"}),c.a.createElement("br",null),c.a.createElement("button",{className:"btn btn-success",type:"submit"},"Submit"))))},f=Object(n.createContext)(),E=f.Provider;function h(e,t){switch(t.type){case"GET_USER":return t.payload;default:return e}}function b(e){e.value;var t=Object(l.a)(e,["value"]),a=Object(n.useReducer)(h,[]),o=Object(m.a)(a,2),r=o[0],i=o[1];return c.a.createElement(E,Object.assign({value:[r,i]},t))}var g=function(){console.log("NAV",u.isAuthenticated);var e=Object(n.useContext)(f),t=Object(m.a)(e,2),a=(t[0],t[1]),o=Object(s.g)();return u.isAuthenticated?c.a.createElement("button",{className:"btn btn-danger",onClick:function(){u.signout((function(){return o.push("/login")})),a({type:"GET_USER",payload:{}})}},"Logout"):c.a.createElement(i.b,{className:"btn btn-success",to:"/login"},"Login")},v={marginRight:10};var O=function(){var e=Object(n.useContext)(f),t=Object(m.a)(e,2),a=t[0],o=(t[1],Object(n.useState)(!1)),r=Object(m.a)(o,2),l=r[0],s=r[1],u=Object(n.useState)(window.innerWidth),d=Object(m.a)(u,2),p=d[0],E=d[1],h=function(){l&&p>991&&s(!1),E(window.innerWidth)};return Object(n.useEffect)((function(){return window.addEventListener("resize",h),function(){window.removeEventListener("resize",h)}}),[]),c.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark mb-2"},c.a.createElement(i.b,{className:"navbar-brand",to:"/public"},"Vacation Makers"),c.a.createElement("div",{className:"".concat(l?"":"collapse ","navbar-collapse"),id:"navbarNav"},a.username?c.a.createElement("span",{className:"userText text-white ml-3 pt-1",to:"#"},"Hi ",a.username," !"):"",c.a.createElement("ul",{className:"navbar-nav ml-auto"},c.a.createElement("li",{className:"nav-item "},c.a.createElement(i.b,{style:v,className:"btn btn-danger",to:"/protected"},"Protected Page"),a.username?"":c.a.createElement(i.b,{style:v,className:"btn btn-warning",to:"/register"},"Register a New User"),c.a.createElement(g,null)))))};var y=function(){var e=Object(s.h)(),t=Object(s.g)(),a=Object(n.useState)(!1),o=Object(m.a)(a,2),r=o[0],l=o[1];return Object(n.useEffect)((function(){var a=(e.state||{from:{pathname:"/protected"}}).from;r&&t.push(a)}),[r,t,e.state]),c.a.createElement("div",null,c.a.createElement(p,{onLogin:function(e){console.log("Logging in "+JSON.stringify(e)),fetch("api/users/login",{method:"POST",body:JSON.stringify(e),credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status&&u.authenticate((function(){l(!0),console.log("Response in login ".concat(JSON.stringify(e)))}))})).catch((function(e){console.log("Error logging in.",e)}))}}))};var N=function(e){var t=e.onRegister,a=Object(n.useRef)(),o=Object(n.useRef)(),r=Object(n.useRef)();return c.a.createElement(d,{title:"Register a New User"},c.a.createElement("form",{ref:a,onSubmit:function(e){return e.preventDefault(),t({username:o.current.value,password:r.current.value})}},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",ref:o,type:"text",name:"username",placeholder:"Enter Username"}),c.a.createElement("br",null),c.a.createElement("input",{className:"form-control",ref:r,type:"password",name:"password",placeholder:"Password"}),c.a.createElement("br",null),c.a.createElement("button",{className:"btn btn btn-primary",type:"submit"},"Submit"))))};var j=function(){var e=Object(s.g)();return c.a.createElement("div",null,c.a.createElement(N,{onRegister:function(t){fetch("api/users/register",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(a){200===a.status&&(console.log("Succesfully registered user!"),fetch("api/users/login",{method:"POST",body:JSON.stringify(t),credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(t){200===t.status&&u.authenticate((function(){console.log("Response in login ".concat(JSON.stringify(t))),e.push("/protected")}))})).catch((function(e){console.log("Error logging in.",e)})))})).catch((function(e){console.log("Error registering user.",e)}))}}))},w=a(30),C=a(20),k=a.n(C),_=function(){return k.a.get("/api/transaction")},T=function(e){return k.a.delete("/api/transaction/"+e)},S=function(e){return k.a.post("/api/transaction",e)},R=a(5),B=a(19),x=a(41);function M(e){var t=e.children;return c.a.createElement("div",{className:"list-overflow-container"},c.a.createElement("ul",{className:"list-group"},t))}function P(e){var t=e.children;return c.a.createElement("li",{className:"list-group-item"},t)}function D(e){return c.a.createElement("div",{className:"form-group"},c.a.createElement("input",Object.assign({className:"form-control"},e)))}function A(e){return c.a.createElement("button",Object.assign({},e,{style:{float:"right",marginBottom:10},className:"btn btn-success"}),e.children)}var H=function(e){return c.a.createElement("span",Object.assign({className:"delete-btn"},e,{role:"button",tabIndex:"0"}),"\u2717")};a(71);var L=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),o=a[0],r=a[1],l=Object(n.useState)({}),s=Object(m.a)(l,2),u=s[0],d=s[1],p=Object(n.useState)(0),f=Object(m.a)(p,2),E=f[0],h=f[1];function b(){_().then((function(e){var t=0;console.log("TEST"+e.data),e.data.forEach((function(e){t+=parseInt(e.price)})),console.log(t),h(t),r(e.data)})).catch((function(e){return console.log(e)}))}function g(e){var t=e.target,a=t.name,n=t.value;d(Object(w.a)(Object(w.a)({},u),{},{[a]:n}))}return Object(n.useEffect)((function(){b()}),[]),c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-4"},c.a.createElement("div",{className:"card"},c.a.createElement(B.a,{className:"budget-form"},c.a.createElement(B.a.Group,{controlId:"formBasicEmail"},c.a.createElement(B.a.Label,{as:"h4"},"Type in the correct information from above"),c.a.createElement(D,{onChange:g,name:"name",placeholder:"Name of hotel, restaurant, airport or attraction"})),c.a.createElement(B.a.Group,{controlId:"formBasicEmail"},c.a.createElement(D,{onChange:g,name:"location",placeholder:"Location of where your activity is"})),c.a.createElement(B.a.Group,{controlId:"formBasicEmail"},c.a.createElement(D,{onChange:g,name:"price",placeholder:"Price of what you chose"}),c.a.createElement(B.a.Text,{className:"text-muted"},"(Restaurant prices are an estimate of two guests including gratuity).")),c.a.createElement(B.a.Group,{controlId:"formBasicPassword"},c.a.createElement(D,{onChange:g,name:"dates",placeholder:"Dates (Optional)"})),c.a.createElement(A,{disabled:!(u.name&&u.location),onClick:function(e){e.preventDefault(),u.name&&u.location&&S({name:u.name,location:u.location,price:u.price}).then((function(e){return b()})).catch((function(e){return console.log(e)}))}},"Submit")))),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(R.a,{style:{width:"18rem"}},c.a.createElement(R.a.Header,{as:"h4"},"Things I have planned for this vacation"),c.a.createElement(x.a,{variant:"flush"},o.length?c.a.createElement(M,null,o.map((function(e){return c.a.createElement(P,{key:e._id},c.a.createElement(i.b,{to:"/transaction/"+e._id},c.a.createElement("strong",null,e.name," in ",e.location," for ",e.price," on ",e.dates)),c.a.createElement(H,{onClick:function(){return t=e._id,void T(t).then((function(e){return b()})).catch((function(e){return console.log(e)}));var t}}))})),c.a.createElement("div",null,e.userAddedRestaurant)):c.a.createElement("h5",null,"Nothing Planned Yet...")))),c.a.createElement("div",{className:"col-4"},c.a.createElement("div",{className:"card"},c.a.createElement("h4",null,"The Total Cost Of Your Trip  "),c.a.createElement("p",null," Total Cost: $",E," ")))))};a(73);var I=function(){return c.a.createElement("div",{className:"public-container"},c.a.createElement("div",{className:"public-text"},c.a.createElement("h1",null,"Welcome!! let us help you plan your future vacation")))},J=a(15),F=a(16),U=a(18),G=a(17),W=[{location_id:"355665786",name:"Stoneliegh Hotel",location:"Fort Meyers",price:60},{location_id:"355665786",name:"Pine Bay Resort",location:"Miami",price:40},{location_id:"355665786",name:"Carson & Coil",location:"Cape Coral",price:210},{location_id:"355665786",name:"Maritime Inn",location:"New Smyrna Beach",price:90},{location_id:"355665786",name:"Hilton at Fort Meyers",location:"Ormond Beach",price:160},{location_id:"355665786",name:"Hyatt Downtown",location:"Sarasota",price:120},{location_id:"355665786",name:"Mama's Bed & Breakfast",location:"Fort Lauderdale",price:260}],$=(a(74),function(e){Object(U.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(J.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={posts:W},e}return Object(F.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(R.a,{className:"hotel-card"},c.a.createElement(R.a.Header,{as:"h5"},"Hotels"),c.a.createElement(R.a.Body,null,c.a.createElement(R.a.Title,null,"Pick a Hotel location, name and price"),c.a.createElement(R.a.Text,null,this.state.posts.map((function(t){return c.a.createElement("div",{key:t.location_id,onClick:e.onclick},"  ",t.location," | ",t.name," | $",t.price)}))))))}}]),a}(c.a.Component)),z=a(22),Y=[{location_id:"355665786",name:"Macro Bites",location:"Miami",price:75,image:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80"},{location_id:"355665786",name:"Golden Palace",location:"Orlando",price:100,image:"https://images.unsplash.com/photo-1466978913421-dad2ebd01d17?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=967&q=80"},{location_id:"355665786",name:"Blind Pig",location:"Daytona Beach",price:65},{location_id:"355665786",name:"Asian Express",location:"New Smyrna Beach",price:75},{location_id:"355665786",name:"Scrumptious Temptations",location:"Fort Meyers",price:110},{location_id:"355665786",name:"Hungry Dog",location:"Tampa Bay",price:45},{location_id:"355665786",name:"Lil Johnny\u2019s",location:"Key West",price:60}],q=(a(75),function(e){Object(U.a)(a,e);var t=Object(G.a)(a);function a(e){var n;return Object(J.a)(this,a),(n=t.call(this,e)).state={posts:Y},n.onclick=n.onclick.bind(Object(z.a)(n)),n}return Object(F.a)(a,[{key:"onclick",value:function(e){this.props.onclick(e)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(R.a,{className:"restaurants-card"},c.a.createElement(R.a.Header,{as:"h5"},"Restaurants"),c.a.createElement(R.a.Body,null,c.a.createElement(R.a.Title,null,"Choose a Restaurant location, name and price"),c.a.createElement(R.a.Text,null,this.state.posts.map((function(t){return c.a.createElement("div",{key:t.location_id,onClick:e.onclick},"  ",t.location," | ",t.name," | $",t.price)}))))))}}]),a}(c.a.Component)),Q=[{location_id:"355665786",name:"Stoneliegh Hotel",location:"Fort Meyers",price:60},{location_id:"355665786",name:"Pine Bay Resort",location:"Miami",price:40},{location_id:"355665786",name:"Carson & Coil",location:"Cape Coral",price:210},{location_id:"355665786",name:"Maritime Inn",location:"New Smyrna Beach",price:90},{location_id:"355665786",name:"Hilton at Fort Meyers",location:"Ormond Beach",price:160},{location_id:"355665786",name:"Hyatt Downtown",location:"Sarasota",price:120},{location_id:"355665786",name:"Mama's Bed & Breakfast",location:"Fort Lauderdale",price:260}],V=(a(76),function(e){Object(U.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(J.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={posts:Q},e}return Object(F.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(R.a,{className:"attractions-card"},c.a.createElement(R.a.Header,{as:"h5"},"Atrractions and Things to do"),c.a.createElement(R.a.Body,null,c.a.createElement(R.a.Title,null,"Pick an activity to do, location and price"),c.a.createElement(R.a.Text,null,this.state.posts.map((function(t){return c.a.createElement("div",{key:t.location_id,onClick:e.onclick},"  ",t.location," | ",t.name," | $",t.price)}))))))}}]),a}(c.a.Component)),K=[{location_id:"355665786",name:"MCO to ORD",date:"09-05-20/09-12-20",location:"Chicago",price:300},{location_id:"355665786",name:"MCO to ORD",date:"09-05-20/09-12-20",location:"Charlotte",price:440},{location_id:"355665786",name:"MCO to ORD",date:"09-05-20/09-12-20",location:"Baltimore",price:210},{location_id:"355665786",name:"MCO to ORD",date:"09-05-20/09-12-20",location:"Phoenix",price:390},{location_id:"355665786",name:"MCO to ORD",date:"09-05-20/09-12-20",location:"Roanoke",price:460},{location_id:"355665786",name:"MCO to ORD",date:"09-05-20/09-12-20",location:"Seattle",price:420},{location_id:"355665786",name:"MCO to ORD",date:"09-05-20/09-12-20",location:"Honolulu",price:560}],X=(a(77),function(e){Object(U.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(J.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={posts:K},e}return Object(F.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(R.a,{className:"flight-card"},c.a.createElement(R.a.Header,{as:"h5"},"Flight"),c.a.createElement(R.a.Body,null,c.a.createElement(R.a.Title,null,"Pick a Flight departure, return and price"),c.a.createElement(R.a.Text,null,this.state.posts.map((function(t){return c.a.createElement("div",{key:t.location_id,onClick:e.onclick},"  ",t.location," | ",t.name," | $",t.price," ",t.date)}))))))}}]),a}(c.a.Component));a(78);var Z=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=(t[0],t[1]),o=Object(n.useContext)(f),r=Object(m.a)(o,2),l=r[0],i=r[1];return console.log(l),Object(n.useEffect)((function(){fetch("api/users/user",{credentials:"include"}).then((function(e){return console.log("response to authenticate ".concat(e)),e.json(e)})).then((function(e){console.log(e),i({type:"GET_USER",payload:e})})).catch((function(e){console.log("Error fetching authorized user.")}))}),[]),c.a.createElement("div",{className:"protected-container"},c.a.createElement(d,{title:"Choose From A Category Below And Add It To Your Itinerary"}),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(q,{onclick:function(e){console.log(e.currentTarget.innerText),a(e.currentTarget.innerText)}})),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(X,null))),c.a.createElement("br",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(V,null)),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement($,null))),c.a.createElement("div",{className:"row"},c.a.createElement("div",null,c.a.createElement("br",null),c.a.createElement(L,null)))))},ee=(a(79),function(e){var t=e.component,a=Object(l.a)(e,["component"]);return c.a.createElement(i.a,null,c.a.createElement("div",null,c.a.createElement(s.b,Object.assign({},a,{render:function(e){return u.isAuthenticated?c.a.createElement(t,e):c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"alert alert-danger text-center",role:"alert"},"This page is private to authenticated users."),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm"}),c.a.createElement("div",{className:"col-sm"},c.a.createElement("h3",null,"Please Register or Login")),c.a.createElement("div",{className:"col-sm"})),c.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}}))}}))))}),te=function(){return c.a.createElement(b,null,c.a.createElement(i.a,null,c.a.createElement("div",null,c.a.createElement(O,{className:"App-header"}),c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/public",component:I}),c.a.createElement(s.b,{path:"/login",component:y}),c.a.createElement(s.b,{path:"/register",component:j}),c.a.createElement(s.b,{path:"/budget",component:L}),c.a.createElement(ee,{path:"/protected",component:Z})))))};r.a.render(c.a.createElement(te,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.f4247808.chunk.js.map